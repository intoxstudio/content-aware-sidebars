/*!
 * @package Content Aware Sidebars
 * @author Joachim Jensen <jv@intox.dk>
 */
!function(a){var b={sidebarID:a("#current_sidebar").val(),init:function(){this.addHandleListener(),this.reviewNoticeHandler(),this.suggestVisibility()},addHandleListener:function(){var b=a("select[name='host']"),c=a("<p>Shortcode:</p><code>[ca-sidebar id="+this.sidebarID+"]</code><p>Template Tag:</p><code>display_ca_sidebar();</code>"),d=a("span.merge-pos");b.parent().append(c),a("select[name='handle']").change(function(){var e=a(this);b.attr("disabled",2==e.val()),2==e.val()?(b.hide(),c.show()):(b.show(),c.hide()),3==e.val()?d.hide():d.show()}).change()},suggestVisibility:function(){var b=a(".js-cas-visibility");b.select2({placeholder:CASAdmin.allVisibility,minimumInputLength:0,closeOnSelect:!0,allowClear:!0,multiple:!0,width:"resolve",nextSearchTerm:function(a,b){return b},data:CASAdmin.visibility}).on("select2-selecting",function(){b.data("forceOpen",!0)}).on("select2-close",function(a){b.data("forceOpen")&&(a.preventDefault(),b.select2("open"),b.data("forceOpen",!1))})},reviewNoticeHandler:function(){$notice=a(".js-cas-notice-review"),a("#wpbody-content").on("click","a, button",function(){$this=a(this),a.ajax({url:ajaxurl,data:{action:"cas_dismiss_review_notice",dismiss:$this.attr("href")?1:0},dataType:"JSON",type:"POST",success:function(){$notice.fadeOut(400,function(){$notice.remove()})},error:function(a){}})})}};a(document).ready(function(){b.init()})}(jQuery);